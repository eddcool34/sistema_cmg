<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Turno</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const CAJEROS = ['Mariana', 'Edgar', 'Cris'];
        const CONTRASEÑA_SISTEMA = 'cmg2025';
        const FONDO_INICIAL_DEFAULT = 1000;

        const DENOMINACIONES = [
            { valor: 1000, nombre: '$1000' },
            { valor: 500, nombre: '$500' },
            { valor: 200, nombre: '$200' },
            { valor: 100, nombre: '$100' },
            { valor: 50, nombre: '$50' },
            { valor: 20, nombre: '$20' },
        ];

        function TestApp() {
            const [turnoActual, setTurnoActual] = useState(null);
            const [showAperturaTurno, setShowAperturaTurno] = useState(false);
            const [formApertura, setFormApertura] = useState({
                cajero: '',
                contraseña: '',
                fondoInicial: FONDO_INICIAL_DEFAULT
            });

            const abrirTurno = () => {
                if (!formApertura.cajero) {
                    alert('Selecciona un cajero');
                    return;
                }

                if (formApertura.contraseña !== CONTRASEÑA_SISTEMA) {
                    alert('Contraseña incorrecta');
                    return;
                }

                const turno_id = `TURN-TEST-${formApertura.cajero}`;
                setTurnoActual({
                    turno_id,
                    cajero: formApertura.cajero,
                    hora_apertura: new Date().toLocaleTimeString('es-MX'),
                    fondo_inicial: formApertura.fondoInicial
                });

                setShowAperturaTurno(false);
                alert('Turno abierto correctamente!');
            };

            return (
                <div className="container mx-auto p-8">
                    <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                        <h1 className="text-2xl font-bold mb-4">Test Sistema de Turnos</h1>

                        {turnoActual ? (
                            <div className="bg-green-100 border border-green-300 rounded-lg p-4">
                                <p className="text-sm font-semibold text-green-800">
                                    <i className="fas fa-user-check mr-1"></i>
                                    Turno Activo
                                </p>
                                <p className="text-lg font-bold text-green-900">{turnoActual.cajero}</p>
                                <p className="text-xs text-green-700">
                                    Apertura: {turnoActual.hora_apertura}
                                </p>
                            </div>
                        ) : (
                            <div className="bg-yellow-100 border border-yellow-300 rounded-lg p-4">
                                <p className="text-sm font-semibold text-yellow-800 mb-2">
                                    <i className="fas fa-exclamation-triangle mr-1"></i>
                                    Sin Turno Abierto
                                </p>
                                <button
                                    onClick={() => setShowAperturaTurno(true)}
                                    className="bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-2 rounded transition-colors"
                                >
                                    <i className="fas fa-door-open mr-1"></i>
                                    Abrir Turno
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Modal de Apertura */}
                    {showAperturaTurno && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                    <i className="fas fa-door-open mr-2 text-blue-500"></i>
                                    Apertura de Turno
                                </h2>

                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Cajero
                                        </label>
                                        <select
                                            value={formApertura.cajero}
                                            onChange={(e) => setFormApertura(prev => ({...prev, cajero: e.target.value}))}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="">Seleccionar cajero...</option>
                                            {CAJEROS.map(cajero => (
                                                <option key={cajero} value={cajero}>{cajero}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Contraseña del Sistema
                                        </label>
                                        <input
                                            type="password"
                                            value={formApertura.contraseña}
                                            onChange={(e) => setFormApertura(prev => ({...prev, contraseña: e.target.value}))}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                            placeholder="Ingresa la contraseña"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Fondo Inicial
                                        </label>
                                        <input
                                            type="number"
                                            value={formApertura.fondoInicial}
                                            onChange={(e) => setFormApertura(prev => ({...prev, fondoInicial: e.target.value}))}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                        <p className="text-xs text-gray-500 mt-1">Fondo estándar: $1,000</p>
                                    </div>
                                </div>

                                <div className="flex gap-4 mt-6">
                                    <button
                                        onClick={abrirTurno}
                                        className="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors"
                                    >
                                        <i className="fas fa-check mr-2"></i>
                                        Abrir Turno
                                    </button>
                                    <button
                                        onClick={() => setShowAperturaTurno(false)}
                                        className="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors"
                                    >
                                        <i className="fas fa-times mr-2"></i>
                                        Cancelar
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<TestApp />, document.getElementById('root'));
    </script>
</body>
</html>
